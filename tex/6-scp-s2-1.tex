\subsubsection{具体的表决协议}

\todo{图16}切掉了每个节点维护的单槽状态。一个节点$v$存储了：它当前的表决$b$；两个最近的已经就绪的不相容表决对$(p,p^{\prime})$；它必须投票\textit{提交}的（或在后续阶段需要确认\textit{提交}的）最小表决$c$（如果存在的话），对此它还没有在后续接受到\textit{终止}；最高的已确认就绪表决$P$；从每个节点（$M$）处接受到的最新消息；以及状态$\varphi$。表决$b$，$p$，$p^{\prime}$和$P$在同一个阶段里是不减的。另外，如果$c\neq\mybm{0}$---意味着$v$可能参与了批准$commit\;c$---代码必须确保$c\lesssim P\lesssim b$。这一不变量保证了节点总是可以投票为当前的表决$b$做好准备。

\todo{图17}展示了协议消息。注意$a\;\vee accept(a)$是每个节点