\section{SCP：一种联邦拜占庭协商协议}\label{sec:scp}

本节给出了恒星共识协议（Stellar Consensus Protocol，SCP）。高层次上来讲，SCP包含两个子协议：一个提名协议和一个表决协议。表决协议产生为槽点的候选值。如果运行时间足够长，它将在每个完好节点处产生相同的候选值集合，这意味着节点可以用一种确定性的方式把候选值组合起来。然而这有两大注意事项。首先，节点无法知道提名协议何时达到收敛点。其次，即使在收敛之后，恶性行为节点可能有能力重置提名过程多次。

当节点猜测到提名协议已经收敛后，它们执行表决协议，这采用了联邦选举来提交或终止与合成值相关联的表决。当节点同意提交一个表决时，和表决相关联的值将为讨论中的槽点具体化。当它们同意终止一个表决时，表决的值变得不再相关。如果一个表决在某个状态下被卡住了——在这种情形下一个或多个完好节点不能够提交或终止表决，那么节点重新使用更高的表决来尝试；他们将新的表决和被卡住的表决一样的值相关联，以防止任何节点错以为被卡住的节点被提交了。直观上来说，安全性来源于所有被卡住的或已提交的表决和相同的值相关联。存活性这一事实保证：一个被卡住的表决可以通过转向更高的表决来中立化。

本节的剩余部分给出了提名协议和表决协议。它们各自先以概念性语句描述，然后用带有表示概念性语句集合的消息的具体协议描述。最终，第\ref{sec:scp_correct}说明了协议的正确性。SCP认为每个槽点是完全独立的且可被看成是一个单一槽点共识协议中的许多分开的实例（和Paxos算法~\cite{Lamport:1998:PP:279227.279229}中的``单一法令议会''\footnote{single-decree synod。}类似）。我们必须总是在一个特定的槽的环境下解释例如候选值和表决等概念，而不像替他的讨论中隐式表述这样一个槽。

\input{tex/6-scp-s1}
\input{tex/6-scp-s2}
\input{tex/6-scp-s3}