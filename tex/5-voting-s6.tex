\subsection{存活性和中立性}\label{sec:vote_stuck}

不论中心化与否，分布式共识的主要挑战是：在系统对它一致性认可之前，一个陈述可能卡在某个长期不确定的状态中。因此，一个协议不会尝试直接去批准外部表现的值。一旦``槽点$i$处的值是$x$''被阻塞了，系统将会永久性的地不能够在槽点$i$处达到一致性，从而丢失存活性。解决方案是仔细地巧妙修改投票中的陈述。在我们真正关心的问题上切断一个被阻塞陈述必然是可能的，即对于槽内容。我们称废弃一个被阻塞的陈述的过程为\textit{中立化}。

更具体地将，\todo{图12}描述了一个系统范围内一个陈述$a$潜在可能的状态。最初，系统是\textit{二价的}，这个名词我们用来说明存在一个序列的事件，其中所有的完好的节点都会接受$a$，而所有的完好节点通过另一个序列将\textit{拒绝}$a$（即接受和$a$相冲突的陈述$\bar a$）。在某些时刻，两种输出的其中一个可能会不再可能。如果没有完好的节点可以拒绝$a$，我们称它是$a-$价的；反之，如果没有节点可以接受$a$，我们称它是$\bar a-$价的。

在一个FBAS系统从二价态转化成$a-$价时，存在一种可能的结果：所有的完好节点都接受了$a$。然而这种情形并不总是成立。考虑像PBFT这样的四节点系统$\left\{v_1,\ldots,v_4\right\}$，其中任意三个节点构成了一个{\quorum}。如果$v_1$和$v_2$赞成$a$，系统变成了$a-$价的；没有哪三个节点可以批准一个想冲突的陈述。然而，如果$v_3$和$v_4$最终投票赞成了和$a$冲突的$\bar a$，它也不可能批准$a$。在这种情形，$a$的状态是永远不确定的，或称之为\textit{被卡住的}。

正如在\todo{图$10a$}中所看到的那样，甚至一旦一个完好的节点接受$a$，系统可能还是会在获得系统范围内对$a$的认可上失败。因此，根据定理\ref{th10}，一旦一个完好的节点确认$a$，所有的完好节点最终都会接受它；因此系统对$a$认可。\todo{图13}总结了完好节点需要从它们自己的本地状态知道关于一个陈述的全局状态的哪些信息。

为了保持共识的可能性，一个协议必须确保每个陈述是不可辩驳因而不会被卡住，或者是可中立化的因而如果被卡住不会阻塞进展。有两种精化中立节点的去中心化节点的常用方法：\textit{基于视图}的方法，由视图采样复制~\cite{Oki:1988:VRN:62546.62549}最先提出并被PBFT系统~\cite{Castro:1999:PBFT}所喜爱；\textit{基于表决}的方法，由Paxos~\cite{Lamport:1998:PP:279227.279229}发明。基于表决的方法可能更难以理解~\cite{Ongaro:2014:SUC:2643634.2643666}。更为混乱的是，人们经常称基于视图复制的方法为``Paxos''算法或者断言两种算法是相同的而事实上它们不是~\cite{6894199}。

基于视图的协议将投票中的槽点和单调递增的视图数联系相关联。万一在视图$n$处共识卡在了第$i$个槽上，节点通过认可视图$n$包含少于$i$个有意义的槽并且转向一个大一点的视图数。基于表决的方法将投票中的\textit{值}和单调递增的表决数相关联。万一一个表决被卡住了，节点用一个更大的表决数重新尝试，仔细选择和之前任何的不确定表决相冲突的值。

本文的工作采用了基于表决的方法，因为这样做使得消除显著的基础节点（或称领导节点）。例如，可以赶上领导节点的行为~\cite{Lamport:2011:BPR:2075029.2075058}。
